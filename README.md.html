<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="doc-style.css" />
  <script src="doc-filelist.js"></script>
  <script>
    var relativeDir = "";
    var thisFile = "README.md";
    var defaultSidebar = true;
  </script>
  <script src="doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h2">
        <a href="#undiscombobulate">undiscombobulate</a>
      </div>

      <div class="heading h2">
        <a href="#unrar-dependency">unrar dependency</a>
      </div>

      <div class="heading h2">
        <a href="#download-and-run-binaries">download &amp;amp; run binaries</a>
      </div>

      <div class="heading h2">
        <a href="#clone-repo-and-run-from-source">clone repo &amp;amp; run from source</a>
      </div>

      <div class="heading h2">
        <a href="#clone-repo-and-build-your-own-binaries">clone repo &amp;amp; build your own binaries</a>
      </div>

      <div class="heading h2">
        <a href="#run-from-cli">run from cli</a>
      </div>

      <div class="heading h2">
        <a href="#run-as-a-service-linux">run as a service (linux)</a>
      </div>

      <div class="heading h2">
        <a href="#run-as-a-service-windows">run as a service (windows)</a>
      </div>

      <div class="heading h2">
        <a href="#watching-vs-polling">watching vs polling</a>
      </div>

      <div class="heading h2">
        <a href="#modules">modules</a>
      </div>

      <div class="heading h2">
        <a href="#scripts">scripts</a>
      </div>

      <div class="heading h2">
        <a href="#developing-testing-contributing">developing / testing / contributing</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="undiscombobulate">
  <h2>
    <a href="#undiscombobulate" name="undiscombobulate" class="pilcrow"></a>
undiscombobulate
  </h2>
</div>
<p><img src="https://img.shields.io/github/issues/fauxilla/undiscombobulate.svg" alt="github-issues"> <img src="https://img.shields.io/github/stars/fauxilla/undiscombobulate.svg" alt="stars"> <img src="https://img.shields.io/github/forks/fauxilla/undiscombobulate.svg" alt="forks"></p>
<p>extensible post processing for movies &amp; tv</p>
<p>Undisco scans your completed downloads, identifies the movie or tv episode, and copies the release into your media archive with appropriate file names.</p>
<p>Should work on both Linux and Windows.</p>
<p>Take a look at the awesome <a href="https://fauxilla.github.io/undiscombobulate/lib/index.js.html">annotated code</a></p>
<div class="pilwrap" id="unrar-dependency">
  <h2>
    <a href="#unrar-dependency" name="unrar-dependency" class="pilcrow"></a>
unrar dependency
  </h2>
</div>
<p>For any of the install / run methods listed below you'll need <code>unrar</code> in your path.</p>
<p>In windows, the easiest way to achieve this is:</p>
<ul>
<li>download <code>UnRAR for Windows</code> <a href="https://www.rarlab.com/rar_add.htm">from rarlab</a></li>
<li>extract to root folder (if running from source) or the same folder as the binary (if running binary)</li>
<li>rename it to <code>unrar.exe</code></li>
</ul>
<div class="pilwrap" id="download-and-run-binaries">
  <h2>
    <a href="#download-and-run-binaries" name="download-and-run-binaries" class="pilcrow"></a>
download &amp; run binaries
  </h2>
</div>
<p>This is convenient because you don't need to install nodejs &amp; npm.</p>
<ul>
<li>go to <a href="https://github.com/fauxilla/undiscombobulate/releases">release page</a> &amp; download binary</li>
<li>copy <code>config.sample.hjson</code> from this repo to <code>config.hjson</code> in the same
directory as your binary and configure paths
<a href="http://hjson.org/">hjson reference</a></li>
</ul>
<div class="pilwrap" id="clone-repo-and-run-from-source">
  <h2>
    <a href="#clone-repo-and-run-from-source" name="clone-repo-and-run-from-source" class="pilcrow"></a>
clone repo &amp; run from source
  </h2>
</div>
<ul>
<li>be awesome</li>
<li>install nodejs &amp; npm</li>
<li>clone this repo somewhere like <code>/opt/</code></li>
<li>copy <code>config.sample.hjson</code> to <code>config.hjson</code> and configure paths
<a href="http://hjson.org/">hjson reference</a></li>
<li><code>npm i</code> to install all the things</li>
<li><code>npm run babel</code> to transpile code</li>
<li>start with <code>npm start</code></li>
</ul>
<div class="pilwrap" id="clone-repo-and-build-your-own-binaries">
  <h2>
    <a href="#clone-repo-and-build-your-own-binaries" name="clone-repo-and-build-your-own-binaries" class="pilcrow"></a>
clone repo &amp; build your own binaries
  </h2>
</div>
<ul>
<li>clone this repo</li>
<li><code>npm i</code> to get dependencies</li>
<li><code>npm run babel</code> to transpile to node 9</li>
<li><code>npm run pkg-linux</code> or <code>npm run pkg-win</code></li>
<li>binary will be output to <code>bin/</code></li>
</ul>
<div class="pilwrap" id="run-from-cli">
  <h2>
    <a href="#run-from-cli" name="run-from-cli" class="pilcrow"></a>
run from cli
  </h2>
</div>
<p><strong>debug info</strong></p>
<p>If you run from source and initiate with <code>npm start</code> debug info will be written to the console. When running from binaries, you'd need to set a <code>DEBUG</code> environment variable to <code>undisco*</code> In linux, this is achieved with a command like <code>DEBUG=undisco* ./undisco-linux-x64</code>.</p>
<p><strong>command line args</strong></p>
<p>Run with no params to see usage info.</p>
<p>If you're running from source the commands look like <code>npm start -- watch -p /srv/downloads</code></p>
<div class="pilwrap" id="run-as-a-service-linux">
  <h2>
    <a href="#run-as-a-service-linux" name="run-as-a-service-linux" class="pilcrow"></a>
run as a service (linux)
  </h2>
</div>
<ul>
<li>copy binary or clone repo to <code>/opt/undiscombobulate</code></li>
<li>create config in that dir</li>
<li>copy <code>undiscombobulate.service</code> into <code>/etc/systemd/system</code></li>
<li>modify <code>ExecStart</code> and <code>WorkingDirectory</code> paths in that file</li>
<li>make your entry point executable, so <code>chmod +x dist/index.js</code> if you're running from source or <code>chmod +x undisco-linux-x64</code> if you're running binaries</li>
<li>make <code>dist/service.js</code> executable as in <code>chmod +x dist/service.js</code></li>
<li>start with <code>sudo systemctl start undiscombobulate.service</code></li>
<li>check logs with <code>sudo journalctl -u undiscombobulate.service</code></li>
<li>start on boot with <code>sudo systemctl enable undiscombobulate.service</code></li>
</ul>
<div class="pilwrap" id="run-as-a-service-windows">
  <h2>
    <a href="#run-as-a-service-windows" name="run-as-a-service-windows" class="pilcrow"></a>
run as a service (windows)
  </h2>
</div>
<p>no idea how to do this sorry.. help wanted.</p>
<div class="pilwrap" id="watching-vs-polling">
  <h2>
    <a href="#watching-vs-polling" name="watching-vs-polling" class="pilcrow"></a>
watching vs polling
  </h2>
</div>
<p>In the options you can specify a watch option (true / false) or a poll option
(minutes or false). Watching file systems in general is pretty shady, it might
work for you, it might not. Polling isnt great either because theres always
a delay, and your hard drives wont go to sleep. So try watching and if that
doesn't work fall back to polling.</p>
<div class="pilwrap" id="modules">
  <h2>
    <a href="#modules" name="modules" class="pilcrow"></a>
modules
  </h2>
</div>
<p>Undisco has a modular architecture, and is very easy to extend. You could create your own module in the root dir, then add the full list of modules to <code>config.hjson</code>
with the path <code>../myModule</code>. It might look like this:</p>
<pre><code>{
  modules: [
    listFiles
    skip
    unrar
    readNfo
    parseName
    tmdb
    ../myModule
    placeholders
    ignore
    destPaths
    copy
    clean
  ]
}
</code></pre>
<p>Take a look in <code>/modules/</code> for examples of how modules work.</p>
<div class="pilwrap" id="scripts">
  <h2>
    <a href="#scripts" name="scripts" class="pilcrow"></a>
scripts
  </h2>
</div>
<ul>
<li><strong>npm run start</strong> : <code>cross-env DEBUG=undisco* node dist</code></li>
<li><strong>npm run build</strong> : <code>npm run babel &amp;&amp; npm run client:prodn &amp;&amp; npm run docs &amp;&amp; cp docs/README.md.html docs/index.html &amp;&amp; npm run gh-pages</code></li>
<li><strong>npm run readme</strong> : <code>node-readme</code></li>
<li><strong>npm run babel</strong> : <code>babel lib -d dist --ignore client</code></li>
<li><strong>npm run babel:watch</strong> : <code>babel lib --watch -d dist --ignore client</code></li>
<li><strong>npm run test</strong> : <code>cross-env DEBUG=undisco* NODE_ENV=test mocha --compilers js:babel-register test</code></li>
<li><strong>npm run test:watch</strong> : <code>cross-env DEBUG=undisco* NODE_ENV=test mocha --compilers js:babel-register --watch test</code></li>
<li><strong>npm run docs</strong> : <code>npm run readme &amp;&amp; rm -fr ./docs/* &amp;&amp; docker -o ./docs -I -x dist,.README.md,test/fixtures,node_modules,docs</code></li>
<li><strong>npm run gh-pages</strong> : <code>gh-pages -d docs</code></li>
<li><strong>npm run pkg-linux</strong> : <code>pkg . --targets node8-linux --output bin/undisco-linux-x64</code></li>
<li><strong>npm run pkg-win</strong> : <code>pkg . --targets node8-win --output bin/undisco-win-x64.exe</code></li>
<li><strong>npm run pkg</strong> : <code>npm run pkg-linux &amp;&amp; npm run pkg-win</code></li>
</ul>
<div class="pilwrap" id="developing-testing-contributing">
  <h2>
    <a href="#developing-testing-contributing" name="developing-testing-contributing" class="pilcrow"></a>
developing / testing / contributing
  </h2>
</div>
<p>Suggestions / contributions are absolutely welcome.</p>
<p>Use <code>npm run babel</code> or <code>npm run babel:watch</code> to transpile source from <code>lib</code> to
<code>dist</code>, then <code>npm start</code> to run.</p>
<p>test with <code>npm run test</code> or <code>npm run test:watch</code></p>
<p>If you want to contribute anonymously, take a look at <a href="https://www.gitmask.com/">gitmask</a>, you basically upload your commit to gitmask and it destroys your id before making a PR.</p>
</div>
  </div>
</body>
</html>
