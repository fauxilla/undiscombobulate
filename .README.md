## ${pkg.name}

${badge('license')} ${badge('github-issues')} ${badge('github-stars')} ${badge('github-forks')}

${pkg.description}

Be aware this is alpha quality, don't run it on media archives you don't want to lose.

## install & run binaries

This is convenient because you don't need to install nodejs & npm.

 * go to release page & download binary
 * copy `config.sample.hjson` from this repo to `config.hjson` in the same
   directory as your binary and configure paths
   [hjson reference](http://hjson.org/)

## install & run from source

 * be awesome
 * install nodejs & npm
 * clone this repo somewhere like `/opt/`
 * copy `config.sample.hjson` to `config.hjson` and configure paths
   [hjson reference](http://hjson.org/)
 * `npm i` to install all the things
 * `npm run babel` to transpile code
 * start with `npm start`

## clone repo & build your own binaries

 * clone this repo
 * `npm i` to get dependencies
 * `npm run babel` to transpile to node 9
 * `npm run pkg-linux` or `npm run pkg-win`
 * binary will be output to `bin/`

## run as a service

  * copy binary or clone repo to `/opt/discombobulate`
  * create config in that dir
  * copy `undiscombobulate.service` into `/etc/systemd/system`
  * modify `ExecStart` and `WorkingDirectory` paths in that file
  * make `dist/service.js` executable as in `chmod +x dist/service.js`
  * start with `sudo systemctl start undiscombobulate.service`
  * check logs with `sudo journalctl -u undiscombobulate.service`
  * start on boot with `sudo systemctl enable undiscombobulate.service`

## run from cli

There are a few command line args which are helpful for testing:

 * `--once` / `-o` : forces 'run once' mode.
 * `--no-dump` / `-n` : won't write dump files to source directories.

everytime undisco processes a directory, it will write a dump of meta / logs to the source directory. Next time undisco processes that directory, it will skip processing it if its been successfully processed already. Therefore, using the `-n` option means that undisco won't know a directory has already been processed next time it looks at it.

if you have source you can `npm start`, if you want to pass in command line args it looks like `npm start -- -n -o`

## watching vs polling

In the options you can specify a watch option (true / false) or a poll option
(minutes or false). Watching file systems in general is pretty shady, it might
work for you, it might not. Polling isnt great either because theres always
a delay, and your hard drives wont go to sleep. So try watching and if that
doesn't work fall back to polling.

## windows

Untested on windows. You'd need to change all the paths in `config.hjson` so the slash is `\`, and ensure you had `unrar` in your path. There's probably other problems as well, I'd love to hear from someone about this.

## modules

Undisco has a modular architecture, and is very easy to extend. You could create your own module in the root dir, then add the full list of modules to `config.hjson`
with the path `../myModule`. It might look like this:

```
{
  modules: [
    listFiles
    skip
    unrar
    readNfo
    parseName
    tmdb
    ../myModule
    placeholders
    ignore
    destPaths
    copy
    clean
  ]
}
```

Take a look in `/modules/` for examples of how modules work.

## scripts

${scripts()}

## developing / testing / contributing

Suggestions / contributions are absolutely welcome.

Use `npm run babel` or `npm run babel:watch` to transpile source from `lib` to
`dist`, then `npm start` to run.

test with `npm run test` or `npm run test:watch`

If you want to contribute anonymously, take a look at [gitmask](https://www.gitmask.com/), you basically upload your commit to gitmask and it destroys your id before making a PR.
